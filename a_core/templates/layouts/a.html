{% extends 'base.html' %}

{% block layout %}
<style>
    #main-content {
        border-right:.1px solid rgb(65, 71, 113);
        border-left:.1px solid rgb(65, 71, 113);
    }
    .home-tabs {
        border-bottom:.1px solid rgb(65, 71, 113);
        padding-top:20px;
        white-space: nowrap;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* Internet Explorer/Edge */
    }
    .home-tabs::-webkit-scrollbar {
        display: none;
    }

    @media (max-width: 768px) {
        #main-content {
        border-left:none;
        border-right:none;
    }
    }
</style>

<aside class="menu-div hidden md:block md:h-full md:w-[22%] fixed left-3 top-28">
    {% include 'includes/left_sidebar.html' %}
</aside>
<content x-data="{ mobileSidebarOpen: false }" class="grid grid-cols-3 max-w-7xl mx-auto my-6 md:ml-[25%]">
    <main id="main-content" class="mx-1 col-span-full md:col-span-2 md:mr-5 -mt-8 relative">
        <!--Home tabs-->
        {% if user.is_authenticated %}
        <div class="tabs-container relative overflow-hidden">
            <div class="home-tabs flex gap-2 md:gap-4 justify-start items-center text-sm md:text-lg  overflow-x-auto">
                <p class="tab selected pb-2">Following</p>
                <p class="tab pb-2">For You</p>
                <p class="tab pb-2">Bookmarks</p>
                <button class="scroll-left hidden absolute left-0 top-0 bottom-0 w-10 text-white bg-transparent border-none cursor-pointer">&lt;</button>
                <button class="scroll-right hidden absolute right-0 top-0 bottom-0 w-10 text-white bg-transparent border-none cursor-pointer">&gt;</button>
            </div>
        </div>
        {% endif %}
        <div class="md:p-2">
            {% block content %}
            {% endblock %}
        </div>
        <a id="postCreateBtn" class="hidden md:hidden fixed bottom-4 right-4 py-2 px-4 rounded-full bg-blue-600 text-white text-lg" href="{% url 'post-create' %}"><i class="fa-solid fa-plus text-white text-lg"></i></a>
    </main>
    <div class="sidebar-div">
        {% load sidebar %}
        {% sidebar_view tag user %}
        {% include "includes/right_sidebar_follow.html" %}
    </div>
</content>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabsContainer = document.querySelector('.home-tabs');
        const scrollLeftBtn = document.querySelector('.scroll-left');
        const scrollRightBtn = document.querySelector('.scroll-right');

        scrollLeftBtn.addEventListener('click', function() {
            tabsContainer.scrollBy({
                left: -100,
                behavior: 'smooth'
            });
        });

        scrollRightBtn.addEventListener('click', function() {
            tabsContainer.scrollBy({
                left: 100,
                behavior: 'smooth'
            });
        });

        tabsContainer.addEventListener('scroll', function() {
            if (tabsContainer.scrollWidth > tabsContainer.clientWidth) {
                scrollLeftBtn.classList.remove('hidden');
                scrollRightBtn.classList.remove('hidden');
            } else {
                scrollLeftBtn.classList.add('hidden');
                scrollRightBtn.classList.add('hidden');
            }
        });
    });
    
    //toggling the fixed create button for small and medium devices
    let lastScrollTop = 0;
    window.addEventListener("scroll", function() {
        let currentScroll = window.pageYOffset || document.documentElement.scrollTop;

        if (currentScroll > lastScrollTop) {
            document.getElementById("postCreateBtn").classList.add('hidden')
        } else {
            document.getElementById("postCreateBtn").classList.remove('hidden')
        }
        lastScrollTop = currentScroll;
    }, false);

</script>
{% endblock %}






<!---

    <mobileSidebarNav class="md:hidden col-span-full mx-auto mb-6 z-10 relative">
        <a @click="mobileSidebarOpen = !mobileSidebarOpen" class="flex items-center cursor-pointer select-none font-bold hover:bg-gray-200 rounded-lg p-3">
            <span>Categories</span>
            <img x-bind:class="mobileSidebarOpen && 'rotate-180 duration-300'" class="w-4 ml-1.5" src="https://img.icons8.com/small/32/000000/expand-arrow.png" />
        </a>
    </mobileSidebarNav>

-->