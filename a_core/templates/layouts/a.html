{% extends 'base.html' %}

{% block layout %}
<style>
    #main-content {
        border-right:.1px solid rgb(65, 71, 113);
        border-left:.1px solid rgb(65, 71, 113);
    }
    .home-tabs {
        border-bottom:.1px solid rgb(65, 71, 113);
       
        white-space: nowrap;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* Internet Explorer/Edge */
    }
    .home-tabs::-webkit-scrollbar {
        display: none;
    }

    @media (max-width: 768px) {
        #main-content {
        border-left:none;
        border-right:none;
    }
    }
</style>
<content x-data="{ mobileSidebarOpen: false }" class="grid grid-cols-4  max-w-7xl mx-auto">
    <aside class="pl-6 hidden md:block md:col-span-1">
        {% include 'includes/left_sidebar.html' %}
    </aside>
    <main id="main-content" class="col-span-full md:col-span-2 relative">
            <div class="md:hidden mobile-nav">
                {% include 'includes/header.html' %}
            </div>
            <!--Home tabs-->
            {% if user.is_authenticated %}
            <div class="tabs-container overflow-hidden pt-2 px-0 pb-2 md:pb-4 mobile-tabs ">
                <div class="home-tabs flex gap-2 md:gap-4 justify-start items-center text-sm md:text-lg  overflow-x-auto">
                    <p class="tab selected pb-2 theme-color">Following</p>
                    <p class="tab pb-2 theme-color">For You</p>
                    <p class="tab pb-2 theme-color">Bookmarks</p>
                    <button class="scroll-left hidden absolute left-0 top-0 bottom-0 w-10 theme-color bg-transparent border-none cursor-pointer">&lt;</button>
                    <button class="scroll-right hidden absolute right-0 top-0 bottom-0 w-10 theme-color bg-transparent border-none cursor-pointer">&gt;</button>
                </div>
            </div>
            {% endif %}
        <div class="md:p-2">
            {% block content %}
            {% endblock %}
        </div>
        <a id="postCreateBtn" class="hidden md:hidden fixed bottom-4 right-4 py-2 px-4 rounded-full theme-color text-lg" href="{% url 'post-create' %}"><i class="fa-solid fa-plus theme-color text-lg"></i></a>
    </main>
    <aside class="right-aside md:col-span-1 py-3 px-5">
        {% include "includes/search.html" %}
        {% load sidebar %}
        {% sidebar_view tag user %}
        {% include "includes/right_sidebar_follow.html" %}
    </aside>
</content>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabsContainer = document.querySelector('.home-tabs');
        const scrollLeftBtn = document.querySelector('.scroll-left');
        const scrollRightBtn = document.querySelector('.scroll-right');

        scrollLeftBtn.addEventListener('click', function() {
            tabsContainer.scrollBy({
                left: -100,
                behavior: 'smooth'
            });
        });

        scrollRightBtn.addEventListener('click', function() {
            tabsContainer.scrollBy({
                left: 100,
                behavior: 'smooth'
            });
        });

        tabsContainer.addEventListener('scroll', function() {
            if (tabsContainer.scrollWidth > tabsContainer.clientWidth) {
                scrollLeftBtn.classList.remove('hidden');
                scrollRightBtn.classList.remove('hidden');
            } else {
                scrollLeftBtn.classList.add('hidden');
                scrollRightBtn.classList.add('hidden');
            }
        });
    });
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
let lastScrollTop = 0;
  $(window).scroll(function() {
    var st = $(this).scrollTop();
    if (st < lastScrollTop) {
      $('#postCreateBtn').fadeIn(); 
    } else {
      $('#postCreateBtn').fadeOut();
    }
    lastScrollTop = st;
  });
</script>

{% endblock %}






<!---

    <mobileSidebarNav class="md:hidden col-span-full mx-auto mb-6 z-10 relative">
        <a @click="mobileSidebarOpen = !mobileSidebarOpen" class="flex items-center cursor-pointer select-none font-bold hover:bg-gray-200 rounded-lg p-3">
            <span>Categories</span>
            <img x-bind:class="mobileSidebarOpen && 'rotate-180 duration-300'" class="w-4 ml-1.5" src="https://img.icons8.com/small/32/000000/expand-arrow.png" />
        </a>
    </mobileSidebarNav>

-->